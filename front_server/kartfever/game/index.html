<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KartFever</title>
    <style>
        body {
            margin: 0;
        }
        canvas {
            display: block;
        }
    </style>
    <script type="importmap">
        {
            "imports": {
                "three": "https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js"
            }
        }
    </script>
    <script
        type="module"
        src="https://cdn.jsdelivr.net/npm/three@0.161.0/build/three.module.js"
        crossorigin="anonymous"
    ></script>
    <script
        type="module"
        src="https://cdn.jsdelivr.net/npm/cannon@0.6.2/+esm"
        crossorigin="anonymous"
    ></script>
    <script
        type="module"
        src='https://yanisrasp.duckdns.org:3000/api/lib/circuit.js'
        crossorigin="use-credentials"
    ></script>
    <script
        type="module"
        src="https://yanisrasp.duckdns.org:3000/api/lib/car.js"
        crossorigin="use-credentials"
    ></script>
    <script
        type="module"
        src="https://yanisrasp.duckdns.org:3000/api/lib/GLTFLoader.js"
        crossorigin="use-credentials"
    ></script>
    <script
        type="module"
        src="https://yanisrasp.duckdns.org:3000/api/lib/CSS2DRenderer.js"
        crossorigin="use-credentials"
    ></script>
    <script src="../templates.js" type="module"></script>
    <link rel="stylesheet" href="/kartfever/game/style.css">
</head>
<body>
    <div class="home-button">
        <a id="home" class="primary-btn" onclick="document.location.pathname = '/home'" style="z-index: 4000;margin: 2em 2em;position: absolute;">Home</a>
    </div>
    <!-- Welcome Screen (Join/Create Game) -->
    <div id="welcome-screen">
        
        <div class="game-box">
            <div class="logo-container">
                <h1 class="game-title">Kart<span>Fever</span></h1>
            </div>
            <div class="input-container">
                <div class="form-group">
                    <label for="game-code">Game Code</label>
                    <input type="text" id="game-code" placeholder="Enter game code (e.g., AZE34R)" maxlength="6">
                </div>
            </div>
            <div class="btn-container">
                <button id="join-game" class="primary-btn">Join Game</button>
                <button id="create-game" class="primary-btn">Create Game</button>
            </div>
        </div>
    </div>

    <!-- In-game UI -->
    <div id="game-ui">
        <!-- Speed Display -->
        <div class="speed-display">
            <div class="speed-value">0</div>
            <div class="speed-unit">KM/H</div>
        </div>

        <!-- Race Information (Lap Counter & Timer) -->
        <div class="race-info">
            <div class="lap-display">
                LAP <span class="current-lap">1</span>/<span class="total-laps">3</span>
            </div>
            <div class="timer">00:00.000</div>
        </div>

        <!-- Leaderboard -->
        <div class="leaderboard">
            <div class="leaderboard-title">Ranking</div>
            <ul class="player-list">
                <li class="player-item current-player">
                    <span class="player-position">1</span>
                    <span class="player-name">You</span>
                    <span class="player-time">00:45.321</span>
                </li>
                <li class="player-item">
                    <span class="player-position">2</span>
                    <span class="player-name">Player2</span>
                    <span class="player-time">00:46.842</span>
                </li>
                <li class="player-item">
                    <span class="player-position">3</span>
                    <span class="player-name">Player3</span>
                    <span class="player-time">00:48.157</span>
                </li>
                <li class="player-item">
                    <span class="player-position">4</span>
                    <span class="player-name">Player4</span>
                    <span class="player-time">00:51.985</span>
                </li>
            </ul>
        </div>
    </div>

    <!-- Countdown Overlay -->
    <div id="countdown-overlay">
        <div class="countdown-number">3</div>
    </div>

    <!-- Placeholder for the Three.js game script -->
    <script type="module" src="./game/script.js"></script>
    <chat-component></chat-component>
</body>
</html>